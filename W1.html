<!DOCTYPE html>
<html lang="en">
<head>
   <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-4YZHC1G9FN"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-4YZHC1G9FN');
    </script>
<meta charset="UTF-8">
<title>워드마이닝</title>
<style>
body {
font-family: sans-serif;
background-color: #f5f5f5;
display: flex;
flex-direction: column;
align-items: center;
margin: 0;
}

h1 {
margin: 20px 0 10px;
font-size: 32px;
}

p.rule {
margin: 0 0 15px;
font-size: 16px;
color: #555;
}

.container {
display: flex;
align-items: flex-start;
gap: 20px;
margin-bottom: 20px;
}

#npcScore, #userScore {
width: 140px;
min-height: 300px;
padding: 10px;
font-size: 18px;
font-weight: bold;
border: 2px solid #333;
box-sizing: border-box;
}

#npcScore {
background-color: #f8c6c6;
}

#userScore {
background-color: #c6e2ff;
}

#game {
display: grid;
grid-template-columns: repeat(6, 50px);
grid-gap: 5px;
padding: 10px;
border: 2px solid #333;
background-color: #eee;
}

.cell {
width: 50px;
height: 50px;
background-color: #ddd;
display: flex;
justify-content: center;
align-items: center;
font-size: 18px;
cursor: pointer;
user-select: none;
border: 1px solid #999;
}

.revealed {
background-color: #fff;
}

.word-owned-user {
background-color: #c6e2ff;
}

.word-owned-npc {
background-color: #f8c6c6;
}

#retryBtn {
font-size: 18px;
padding: 14px 32px;
margin: 20px;
cursor: pointer;
}
</style>
</head>
<body>
<h1>Word Miner</h1>
<p class="rule"> click tiles, find words, win! </p>

<div class="container">
<div id="npcScore">conputer:<br></div>
<div id="game"></div>
<div id="userScore">You:<br></div>
</div>
<button id="retryBtn">Retry</button>

<script>
const wordList = [
"ALSO","AREA","AUNT","AWAY","BABY","BACK","BALL","BAND","BANK","BATH","BEER","BEST","BIKE","BILL","BIRD","BLOG","BLUE","BOAT","BODY","BOOK","BOOT","BORN","BOTH","BUSY","CAFE","CAKE","CALL","CARD","CENT","CITY","CLUB","COAT","COLD","COME","COOK","COOL","COST","DARK","DATE","DEAR","DESK","DIET","DISH","DOOR","DOWN","DRAW","EACH","EAST","EASY","ELSE","EURO","EVEN","EVER","EXAM","FACE","FACT","FALL","FARM","FAST","FEEL","FILL","FILM","FIND","FINE","FIRE","FISH","FIVE","FLAT","FOOD","FOOT","FORM","FOUR","FREE","FROM","FULL","GAME","GIRL","GIVE","GOOD","GREY","GROW","HAIR","HALF","HAND","HARD","HATE","HAVE","HEAD","HEAR","HELP","HERE","HIGH","HOME","HOPE","HOUR","IDEA","INTO","JOIN","JULY","JUNE","JUST","KEEP","KIND","KNOW","LAND","LAST","LATE","LEFT","LIFE","LIKE","LINE","LION","LIST","LIVE","LONG","LOOK","LOSE","LOVE","MAIN","MAKE","MANY","MEAL","MEAN","MEAT","MEET","MENU","MILE","MILK","MISS","MORE","MOST","MOVE","MUCH","MUST","NAME","NEAR","NEED","NEWS","NEXT","NICE","NINE","NOSE","NOTE","ONCE","ONLY","OPEN","OVER","PAGE","PAIR","PARK","PART","PAST","PINK","PLAN","PLAY","POOL","POOR","POST","RAIN","READ","REAL","RICE","RICH","RIDE","ROAD","ROOM","RULE","SALT","SAME","SELL","SEND","SHOE","SHOP","SHOW","SICK","SING","SLOW","SNOW","SOME","SONG","SOON","SOUP","STAR","STAY","STOP","SURE","SWIM","TAKE","TALK","TALL","TAXI","TEAM","TELL","TEST","TEXT","THAN","THAT","THEM","THEN","THEY","THIS","TIME","TOWN","TREE","TRIP","TRUE","TURN","TYPE","VERY","WAIT","WAKE","WALK","WALL","WANT","WARM","WASH","WEAR","WEEK","WELL","WEST","WHAT","WHEN","WIFE","WILL","WINE","WITH","WORD","WORK","YEAH","YEAR","YOUR",
"ABOUT","ABOVE","ACTOR","ADULT","AFTER","AGAIN","AGREE","ANGRY","APPLE","APRIL","BEACH","BEGIN","BELOW","BLACK","BORED","BREAD","BREAK","BRING","BROWN","BUILD","CARRY","CHAIR","CHART","CHEAP","CHECK","CHILD","CLASS","CLEAN","CLIMB","CLOCK","CLOSE","COULD","CREAM","DANCE","DIRTY","DRESS","DRINK","DRIVE","EARLY","EIGHT","EMAIL","ENJOY","EVENT","EVERY","EXTRA","FALSE","FIFTH","FIFTY","FINAL","FIRST","FLOOR","FORTY","FRONT","FRUIT","FUNNY","GLASS","GREAT","GREEN","GROUP","GUESS","HAPPY","HELLO","HOBBY","HORSE","HOTEL","HOUSE","JEANS","JUICE","LARGE","LATER","LAUGH","LEARN","LEAVE","LIGHT","LOCAL","LUNCH","MARCH","MATCH","MAYBE","METRE","MODEL","MONEY","MONTH","MOUSE","MOUTH","MOVIE","MUSIC","NEVER","NIGHT","NORTH","NURSE","OFTEN","ONION","ORDER","OTHER","PAINT","PAPER","PARTY","PHONE","PHOTO","PIANO","PIECE","PLACE","PLANE","PLANT","POINT","POUND","PRICE","QUICK","QUIET","QUITE","RADIO","READY","RELAX","RIGHT","RIVER","SALAD","SEVEN","SHARE","SHEEP","SHIRT","SHORT","SIXTY","SKILL","SKIRT","SLEEP","SMALL","SNAKE","SORRY","SOUND","SOUTH","SPACE","SPEAK","SPELL","SPEND","SPORT","STAND","START","STILL","STORY","STUDY","STYLE","SUGAR","TABLE","TEACH","THANK","THEIR","THERE","THING","THINK","THIRD","THREE","TIRED","TITLE","TODAY","TOOTH","TOPIC","TRAIN","TWICE","UNCLE","UNDER","UNTIL","VIDEO","VISIT","WATCH","WATER","WHERE","WHICH","WHITE","WOMAN","WORLD","WOULD","WRITE","WRONG","YOUNG",
"ACROSS","ACTION","ADVICE","AFRAID","ALWAYS","ANIMAL","ANSWER","ANYONE","AROUND","ARRIVE","ARTIST","AUGUST","AUTUMN","BANANA","BECOME","BEFORE","BEHIND","BETTER","BLONDE","BORING","BOTTLE","BUTTER","CAMERA","CANNOT","CAREER","CARROT","CENTRE","CHANGE","CHEESE","CHOOSE","CINEMA","COFFEE","COLOUR","COMMON","COURSE","COUSIN","CREATE","DANCER","DECIDE","DESIGN","DETAIL","DINNER","DOCTOR","DOLLAR","DRIVER","DURING","EIGHTY","ELEVEN","ENOUGH","FAMILY","FAMOUS","FARMER","FATHER","FINISH","FLIGHT","FLOWER","FOLLOW","FORGET","FOURTH","FRIDAY","FRIEND","FUTURE","GARDEN","GUITAR","HAPPEN","HEALTH","HUNGRY","ISLAND","JACKET","LESSON","LETTER","LISTEN","LITTLE","MARKET","MEMBER","MINUTE","MODERN","MOMENT","MONDAY","MOTHER","MUSEUM","NINETY","NOBODY","NUMBER","OBJECT","OFFICE","ONLINE","ORANGE","PARENT","PENCIL","PEOPLE","PEPPER","PERIOD","PERSON","PHRASE","PLAYER","PLEASE","POLICE","POTATO","PREFER","PRETTY","PURPLE","READER","REALLY","REASON","REPEAT","REPORT","RESULT","RETURN","SCHOOL","SECOND","SHOULD","SHOWER","SINGER","SISTER","SPRING","STREET","STRONG","SUMMER","SUNDAY","TENNIS","THANKS","THIRTY","TICKET","TOILET","TOMATO","TRAVEL","TSHIRT","TWELVE","TWENTY","USEFUL","WAITER","WINDOW","WINTER","WORKER","WRITER","YELLOW",
];
const gridSize = 6;
const totalCells = gridSize * gridSize;
let board, revealed, wordMap, foundWords, currentPlayer, foundBy, words;
let resultShown = false;

const gameEl = document.getElementById('game');
const userScoreEl = document.getElementById('userScore');
const npcScoreEl = document.getElementById('npcScore');
const retryBtn = document.getElementById('retryBtn');

function shuffle(arr) {
for (let i = arr.length - 1; i > 0; i--) {
const j = Math.floor(Math.random() * (i + 1));
[arr[i], arr[j]] = [arr[j], arr[i]];
}
}

function getRandomWords(n) {
const temp = [...wordList];
shuffle(temp);
return temp.slice(0, n);
}

function getRandomDirection() {
const dirs = [
{ x: 1, y: 0 },
{ x: 0, y: 1 },
{ x: 1, y: 1 },
];
return dirs[Math.floor(Math.random() * dirs.length)];
}

function canPlaceWord(word, x, y, dx, dy) {
for (let i = 0; i < word.length; i++) {
let nx = x + dx * i;
let ny = y + dy * i;
if (nx < 0 || ny < 0 || nx >= gridSize || ny >= gridSize) return false;
let index = ny * gridSize + nx;
if (board[index] && board[index] !== word[i]) return false;
}
return true;
}

function placeWord(word) {
for (let attempt = 0; attempt < 100; attempt++) {
let dir = getRandomDirection();
let x = Math.floor(Math.random() * gridSize);
let y = Math.floor(Math.random() * gridSize);
if (canPlaceWord(word, x, y, dir.x, dir.y)) {
let positions = [];
for (let i = 0; i < word.length; i++) {
let nx = x + dir.x * i;
let ny = y + dir.y * i;
let idx = ny * gridSize + nx;
board[idx] = word[i];
positions.push(idx);
}
wordMap[word] = positions;
return true;
}
}
return false;
}



function fillEmptyCells() {
const filler = ''.split('');
let iFiller = 0;
for (let i = 0; i < totalCells; i++) {
if (!board[i]) board[i] = filler[iFiller++ % filler.length];
}
}

function updateScore() {
userScoreEl.innerHTML = "You:<br>" + foundBy.user.join("<br>");
npcScoreEl.innerHTML = "computer:<br>" + foundBy.npc.join("<br>");
}

function reveal(index) {
if (revealed[index]) return;
revealed[index] = true;
const cell = gameEl.children[index];
cell.classList.add('revealed');
cell.textContent = board[index];
}

function checkWords() {
for (let word of words) {
if (foundWords.has(word)) continue;
const positions = wordMap[word];
if (positions.every(i => revealed[i])) {
foundWords.add(word);
let owner = currentPlayer === 'user' ? 'user' : 'npc';
foundBy[owner].push(word);
for (let i of positions) {
gameEl.children[i].classList.add(owner === 'user' ? 'word-owned-user' : 'word-owned-npc');
}
updateScore();
}
}

if (foundWords.size === words.length && !resultShown) {
resultShown = true;
let userCount = foundBy.user.length;
let npcCount = foundBy.npc.length;
if (userCount > npcCount) {
userScoreEl.innerHTML += "<br><br><span style='font-size:24px;'>WIN</span>";
npcScoreEl.innerHTML += "<br><br><span style='font-size:24px;'>LOSE</span>";
} else if (npcCount > userCount) {
npcScoreEl.innerHTML += "<br><br><span style='font-size:24px;'>WIN</span>";
userScoreEl.innerHTML += "<br><br><span style='font-size:24px;'>LOSE</span>";
} else {
userScoreEl.innerHTML += "<br><br><span style='font-size:24px;'>DRAW</span>";
npcScoreEl.innerHTML += "<br><br><span style='font-size:24px;'>DRAW</span>";
}
}
}

function switchTurn() {
currentPlayer = currentPlayer === 'user' ? 'npc' : 'user';
if (currentPlayer === 'npc') {
setTimeout(npcTurn, 800);
}
}

function npcTurn() {
let options = revealed.map((rev, idx) => !rev ? idx : null).filter(idx => idx !== null);
if (options.length === 0) return;
let choice = options[Math.floor(Math.random() * options.length)];
handleClick(choice);
}


function handleClick(index) {
if (revealed[index] || resultShown) return; // 게임이 끝났으면 클릭 무시
reveal(index);
checkWords();
switchTurn();
}



function init() {
board = Array(totalCells).fill(null);
revealed = Array(totalCells).fill(false);
wordMap = {};
foundWords = new Set();
foundBy = { user: [], npc: [] };
currentPlayer = 'user';
words = getRandomWords(4);
resultShown = false;

for (let word of words) {
placeWord(word);
}
fillEmptyCells();
updateScore();

gameEl.innerHTML = '';
for (let i = 0; i < totalCells; i++) {
const cell = document.createElement('div');
cell.className = 'cell';
cell.addEventListener('click', () => {
if (currentPlayer === 'user') {
handleClick(i);
}
});
gameEl.appendChild(cell);
}
}

retryBtn.addEventListener('click', init);
init();
</script>

<div id="credits" style="margin-top: 50px; font-size: 1em; color: gray; text-align: center; line-height: 1.6;">
<p>Idea & Planning by <strong>Soosoohan</strong></p>
<p>Special Thanks to<br> Jaechi, Nature Lee, Juju, Coxon, Mong and Zziny</p>
<p>Thanks for playing!</p>
</div>
</body>
</html>
